# ActiveJob
## ActiveJobとは
- ジョブを宣言し、バックエンドで様々なキューを実行するためのフレームワーク
- ジョブに含まれるもの
  - 定期的なクリーンアップ
  - 請求書発行やメール送信など、その他あらゆる処理

- キューはデータ構造の一つで、待ち行列のこと。
  - 要素を入ってきた順に並べ、順に実行するもの。キューを登録することをエンキューという。

> デフォルトのRailsは非同期キューを実装します。これは、インプロセスのスレッドプールでジョブを実行します。ジョブは非同期に実行されますが、再起動するとすべてのジョブは失われます。

***インプロセスのスレッドプール***がピンとこなかったが、要はrailsのサーバーを再起動すると、ジョブはすべて失われてしまう。これを回避するため、redisとsidekiq等を導入する必要がある。

## どのような場面で使うか
- リアルタイム性を伴わない処理、重たい処理に使われることが多い。
  - メールの送信
  - 動画のアップロード
  - データを集計してcsvに落とす、など

## 利用されるバックエンドライブラリ
- sucker_panch
- Sidekiq

## ActiveJobを利用せず、Sidekiqのみ利用することも可能
可能ではあるが、AvtiveJobを使うと、ライブラリの変更に対応しやすいので、特段の事情がなければActiveJobを使うのが良さそう。

### 参考
[Active Job の基礎 - Railsガイド](https://railsguides.jp/active_job_basics.html)

[キュー 【queue】 待ち行列 - IT用語辞典](https://e-words.jp/w/%E3%82%AD%E3%83%A5%E3%83%BC.html)

[Ruby on RailsのActiveJobとは? - Qiita](https://qiita.com/petertakahashi/items/cb9ae73e5ba3020f4a89)
