# rails new
```
rails _5.2.6_ new insta_clone -d mysql -T -skip-turbolinks -skip-bundle
```
### オプションの参考
https://railsdoc.com/rails

### mysqlがないと怒られる
#### 最終的には以下を参考にして解決
https://qiita.com/fukuda_fu/items/463a39406ce713396403

# git flowの導入

# gitignore
- database.ymlを追加する。
  - データベースのパスワード等が記載されており、Githubに公開するのは危険

# Rubocopの導入
### gem
```ruby
group :development do
  gem 'rubocop', require: false
  gem 'rubocop-performance', require: false
  gem 'rubocop-rails', require: false
  gem 'rubocop-rspec'
end
```
# 国際化
### 日本語ファイルのダウンロード
```
wget https://raw.githubusercontent.com/svenfuchs/rails-i18n/master/rails/locale/ja.yml -P config/locales
```
- wgetコマンドではrawのコードが表示されるURLを指定すること。
- オプションは`-P`を使うことで、保存先のディレクトリを指定できる。

### gemの導入
- Gemfile `にgem 'rails-i18n', '~> 5.1'`を記述
- `config/locales/model`に`ja.yml`作成、日本語訳情報を書き込む
```
ja:
  activerecord:
    models:
      user: 'ユーザー'
    attributes:
      user:
        name: '名前'
        email: 'メールアドレス'
```
- locales フォルダにviewのフォルダを設けないため、ビューで日本語訳を使うためには以下のように記述する。（ちょっと面倒な気が）
```
 = t 'activerecords.attributes.user.name'
```

#### 参考
- https://qiita.com/atsushi101011/items/bd07e0dccf45a6055189
- https://qiita.com/scivola/items/f6267fe2ffded64bd8bf
- https://github.com/svenfuchs/rails-i18n

# sorceryでログイン機能を実装する
基本的には公式Githubに掲載されている（基本はこちらを見てみよう）
[sorcery - Github](https://github.com/Sorcery/sorcery)

使えるメソッドは下記のQiita記事が便利
[【Sorcery】Sorceryで使えるようになるメソッドとその活用例
](https://qiita.com/aiandrox/items/65317517954d8d44d957)

### Userモデル
- validatesはオプションをつけることができる。`if:`は最もよく使われるオプションの一つ
```rb
class User < ApplicationRecord
  authenticates_with_sorcery!

  validates :username, uniqueness: true, presence: true
  validates :email, uniqueness: true, presence: true
  validates :password, length: { minimum: 3 }, if: -> { new_record? || changes[:crypted_password] }
  validates :password, confirmation: true, if: -> { new_record? || changes[:crypted_password] }
  validates :password_confirmation, presence: true, if: -> { new_record? || changes[:crypted_password] }

end
```
> [5 条件付きバリデーション - Railsガイド](https://railsguides.jp/active_record_validations.html#:~:text=5.1%20%3Aif%E3%82%84%3Aunless%E3%81%A7%E3%82%B7%E3%83%B3%E3%83%9C%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%86)


# annotate
## annotateとは
モデルのカラムやルーティングの情報を便利に表示してくれるgem
### 導入
```
group :development do
  gem 'annotate'
end
```
以下実行すると設定ファイルが生成される。
```
rails g annotate:install
```
### 使い方
- スキーマやモデルのファイルには`rails db:migrate`の時に追記される
- ルーティングの情報をroute.rbに表示したい時は以下を実行
```
annotate --routes
```
### 参考
- https://github.com/ctran/annotate_models
- https://qiita.com/koki_develop/items/ae6b5f41c18b2872d527

# better_errorsとbinding_of_caller
### なんぞや
エラーの表示をわかりやすくしてくれる
### 導入
```
group :development do
  gem 'better_errors'
  gem 'binding_of_caller'
end
```
### 参考
- https://qiita.com/terufumi1122/items/a6f9a939dce25b2d9a3e
公式はあまり見ていないけど、今後のために一応
- https://github.com/BetterErrors/better_errors
- https://github.com/banister/binding_of_caller

# pry-byebug
### 参考
- https://github.com/deivid-rodriguez/pry-byebug
- https://qiita.com/ryosuketter/items/da3a38d0d41c7e20a2d6


# pry-rails
### 導入
```
group :development do
  gem ''
end
```
### 参考
- https://github.com/pry/pry-rails
- https://qiita.com/STHEXA/items/1de2411cb3987066c9b9

# redis-rails
### 参考
- https://qiita.com/keitah/items/61f5308424957257017e
- https://github.com/redis-store/redis-rails

# レイアウト関連
[CSS には vw, vh, vmin, vmax という単位がある](https://dev.classmethod.jp/articles/css-length-viewport/)



