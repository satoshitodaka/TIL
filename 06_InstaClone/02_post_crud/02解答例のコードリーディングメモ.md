# モデル
## Post
- なぜ todakaはimagesの型をJsonにしたか、解答例はなぜStringか
# コントローラ
## app/controllers/posts_controller.rb
### 投稿編集機能は`require_login`をつけること。
- つけないせいで、編集中にセッションが切れるとエラーが発生していた。
#### newアクション
- Post.all といった取得だと、SQLを沢山発光するのでN＋1問題が発生してしまう。
- `includes`メソッドを使って取得すること。
```
@post = Post.all.includes(:user)
```
- @post = Post.all の場合
```
Started GET "/posts" for ::1 at 2022-01-16 09:02:42 +0900
Processing by PostsController#index as HTML
  Rendering posts/index.html.slim within layouts/application
  Post Load (0.9ms)  SELECT `posts`.* FROM `posts`
  ↳ app/views/posts/index.html.slim:1
  User Load (0.2ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 121 LIMIT 1
  ↳ app/views/posts/index.html.slim:6
  CACHE User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 121 LIMIT 1  [["id", 121], ["LIMIT", 1]]
  ↳ app/views/posts/index.html.slim:6
  CACHE User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 121 LIMIT 1  [["id", 121], ["LIMIT", 1]]
  ↳ app/views/posts/index.html.slim:6
  CACHE User Load (0.0ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 121 LIMIT 1  [["id", 121], ["LIMIT", 1]]
  ↳ app/views/posts/index.html.slim:6
  Rendered posts/index.html.slim within layouts/application (37.1ms)
  User Load (0.3ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 121 LIMIT 1
  ↳ app/views/layouts/application.html.slim:11
  Rendered shared/_header.html.slim (6.0ms)
  Rendered shared/_flash_messages.html.slim (2.3ms)
Completed 200 OK in 91ms (Views: 77.5ms | ActiveRecord: 6.5ms)
```
- @post = Post.all.includes(:user) の場合
```
Started GET "/posts" for ::1 at 2022-01-16 09:01:53 +0900
Processing by PostsController#index as HTML
  Rendering posts/index.html.slim within layouts/application
  Post Load (0.4ms)  SELECT `posts`.* FROM `posts`
  ↳ app/views/posts/index.html.slim:1
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 121
  ↳ app/views/posts/index.html.slim:1
  Rendered posts/index.html.slim within layouts/application (5.6ms)
  User Load (0.4ms)  SELECT  `users`.* FROM `users` WHERE `users`.`id` = 121 LIMIT 1
  ↳ app/views/layouts/application.html.slim:11
  Rendered shared/_header.html.slim (3.9ms)
  Rendered shared/_flash_messages.html.slim (1.8ms)
Completed 200 OK in 41ms (Views: 38.6ms | ActiveRecord: 1.2ms)
```
# ビュー
## application.rb
### viewport
- viewportを指定すること。
```
meta[name="viewport" content="width=device-width, initial-scale=1.0"]
```
#### viewportとは
- ブラウザ上にレンダリングする、仮想の表示領域。width＝XXXと指定すると、指定した幅で表示領域が作成される。
- widthを指定すると表示内容を安定させることができる反面、ディスプレイとviewportの大きさに差があると、おかしなことになってしまう。（表示が画面に収まらないor余白ができすぎる）
- 幅を`width=devise-width`と指定することで、どのディスプレイでも安定して表示することができる。
#### 参考
- https://qiita.com/ryounagaoka/items/045b2808a5ed43f96607
- https://blog.ousaan.com/index.cgi/links/20170518.html

## その他全般
### hr タグ
https://developer.mozilla.org/ja/docs/Web/HTML/Element/hr

### link_toのブロック
- link_toでfontawesome　などのアイコンを使う場合`do`を使ってブロックで囲む必要がある。
```
= link_to new_post_path, class: 'nav-link' do
  = icon 'far', 'image', class:'fa-lg'
```
#### 参考
- https://blog.yuhiisk.com/archive/2018/05/02/rails-link-to-in-tags.html

