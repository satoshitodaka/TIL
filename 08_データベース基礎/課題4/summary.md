# 課題
Qiitaのようなブログアプリのテーブル設計をしてください。

### 要件
- 記事を作成できる
- 記事にタグづけができる
- 記事にコメントができる
- LGTMができる
- ストックができる

# 設計メモ
### 概念を抜き出してみる
- ユーザー
- 記事
- コメント
- LGTM（Like機能のようなものと理解し、今回はLIKEとする）
- ストック機能
  - 種類ごとにストックできるようにする（Qiitaのように）

### 概念をパズル化してみる
- ユーザーは記事を持っている
- 記事はコメントがつき、これはユーザーに紐づく
- 記事にいいねがつき、これはユーザーが紐づく
- ユーザーは記事をストックできる。

[![Image from Gyazo](https://i.gyazo.com/86f906c84965c85b07e2e26ed4541775.png)](https://gyazo.com/86f906c84965c85b07e2e26ed4541775)

### ER図に書き出す
[![Image from Gyazo](https://i.gyazo.com/b4c10e2aaf711b19f33697cda93510eb.png)](https://gyazo.com/b4c10e2aaf711b19f33697cda93510eb)

[![Image from Gyazo](https://i.gyazo.com/4eb03731bc9263b9b6f936ff6f44df47.png)](https://gyazo.com/4eb03731bc9263b9b6f936ff6f44df47)

### 正規化する
- ER図に展開したエンティティをリソース系とイベント系に分ける
  - リソース系は、ユーザー、記事、コメント、ストック
  - イベント系はいいね
- リソース系のうち、冗長になりそうなもの（データの不整合が発生しそうなもの）を検討する。
  - 中間テーブルを設けたほうが良さそうなのはストックと記事の中間テーブル
  - コメントといいねは、ユーザーと記事の中間テーブルと見なすことができる。
[![Image from Gyazo](https://i.gyazo.com/38f62e335bcbe478b323e5b3a7bbdb4d.png)](https://gyazo.com/38f62e335bcbe478b323e5b3a7bbdb4d)

### リレーションとエンティティを最適化する
- リレーションについて、今回は多対他だけなので特に見直さない。
- エンティティについてもまとめるのは難しそう。

### 参考
[複数のテーブルに対して多対一で紐づくテーブルの設計アプローチ | スパイスファクトリー株式会社](https://spice-factory.co.jp/development/has-and-belongs-to-many-table/)


