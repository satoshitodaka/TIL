# 第３章
- コードの工夫だけでは、高い可読性を維持することは難しい。
- コードだけで説明しきれない時、非直感的なコードを書く時は、コメントで補足する必要がある。
## 3-1
- コメントには大きく二つある。
  - ドキュメンテーション。形式的に、クラスや関数などの定義について説明する。
  - 非形式的なコメントは、インラインコメントやブロックコメントなど、コードのあらゆる場所に記述してOK。
- 可読性をあげる、誤解を減らす、リファクタリングを促すなどのメリットがあるが、それがない場合は書かなくて良い。
### 理解の加速
- コードを正確に理解したり、理解の時間を短縮することができる。コメントは、抽象度を高く、粒度を粗くかくと良い。
### ミスを防ぐ
- コードの前提知識や条件、制約がある場合にコメントをかくと良い。
- 現状のコードに対して間違ったリファクタリングを防ぐこともできる。利用目的がわからなくて誤って消す、といった事態も避けることができる。
### リファクタリングの促進
- コードの説明をする際に、コードの複雑度や記述量以上にコメントが多くなってしまう場合がある。その場合、問題点が浮き彫りとなり（仕様が適切ではなかったり、記述が不足している場合など）、リファクタリングのヒントになることもある。
## 3-2
### 3-2-1
#### 自動生成のドキュメントを放置しない。
- 情報量が少なく、書く意味がない。
#### 宣言と同程度の情報量しか書かない
- 実装を読めばわかるので、書く意味がない。プラスアルファの情報をドキュメントに記述すること。
#### 実装の自然言語をそのままドキュメントにする
- 実装を読めばわかるので、ドキュメント書く意味がない。
#### そのコードを使う側に言及する
- 不必要に依存度を高めてしまう。ドキュメントの保守性が著しく下がってしまう。
#### 概要を書かない
- 実装を知らない人が大まかに把握できるようにする。
#### 実装の詳細に言及する
- 概要を把握することが目的なので、実装の詳細を使って説明する => 読み手に実装の詳細を把握を強要することになる。
- やってはいけないこと
  - アクセス制限の強い言葉を使う publicやprivateなど
  - 抽象クラスの説明に具象クラスを用いる => 具象クラスに変更があった時に言及する必要がある。
### 3-2-2
- 概要を最初に書き、続けて詳細を書く。
- 抽象度や解像度を、実装より粗くする。
- 実装の詳細や使用する側に言及しない。
### 3-2-3
#### 要約のテクニック
- 何であるか・何をするかを書く
- 重要なコードを見つけ、それを元に要約文を作成する。
- コードの共通点を見つけて抽象化する。共通部分を列挙するように述べると、伝わりやすい要約となる。
### 3-2-4
- 要約を補足し、開発者が使えるようにするために詳細を書く。「どのように使うか」など。
- 関数が副作用を持つ場合、戻り値を補足するのが良い。戻り値は関数内でその名前を宣言することはできないので、補足するとわかりやすい。
## 3-3
- ドキュメントは、実装を読まずに概要を把握するためのもの
- 非形式的なコメントは、実装を読む際の補足となるもの。 => 概要が必須ではない。
### 3-3-1
- 実装のブロックの説明にコメントを用いることができ流。本来はクラスを分割すべきだが、そこまで記述量が多くないため分割しないケース。
=> コメントがないと実装やその重要な箇所に気付けない場合があるため、コメントを残すのは有効。
### 3-3-2
- 非直感的な実装があり初見で前提条件を認識しづらいケースでは、コメントを残すと良い。
- 説明が長すぎても可読性が下がってしまう。注意を喚起し、そのコードの必要性を伝えるだけでも価値がある。
- 簡単な説明だけをコメントし、Issue番号を記述して詳細な説明を任せるのも良い。