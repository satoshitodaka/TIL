# 5章
- 関数の動作の予測のしやすさが大事
  - 戻り値が取りうる範囲、戻り値の意味
  - どのような副作用を持つか
  - 発生しうるエラーとのその内容
- 予測しやすさを確かめる上で大事なポイント
  - 関数の名前の意味と動作が一致しているか。
  - 関数の名前が具体的
  - ドキュメンテーションの要約を容易にかける。
=> これらが満たせない場合、関数の責任が曖昧か、関数の流れが明確でない可能性がある。可読性が下がり、バグの原因となることもある。
## 5-1
- 関数も、クラスなどと同様に責務を一つにするべきである。
- 関数が複数の責務を持ってしまった場合、いくつかのデメリットがある。
  - 抽象的に把握することができなくなる。
  - その関数の再利用が難しくなり、コードのコピーを量産させてしまう。
### 5-1-1
- 責務を一つにするコツとして、要約を簡単に書けるかどうかで判断すると良い。簡単に書けない場合は責務が複数ある可能性がある。
### 5-1-2
- 関数の責務を一つにするために手法として、コマンドとクエリは関数を分けるというものがある。
  - コマンドは、レシーバーや外部の状態を変化させるもの。戻り値を返さない。
  - クエリは、状態を知るための関数で、戻り値を返す。
- これは手法の一つであり目的ではない。過剰に適用することにより、可読性が下がったり不必要に状態を管理する必要が出てくる場合もある。
- この手法を適用するかどうか判断の目安
  - 戻り値が関数の主となる結果か、メタデータなどの副次的な結果かどうか。
  - 戻り値が関数の主であれば、コマンドとクエリは分割すべき。副次的なものであれば、必ずしも分割しなくて良い。ただし、分割しない場合はドキュメントに戻り値の内容を記述するのが良い。
## 5-2
- 流れが明確な関数は、斜め読みが可能で短時間で概要を把握することができる。
- 流れが明確な関数の条件
  - 詳細な挙動を読み飛ばしても理解できる。
  - 条件分岐を網羅せずに理解できる。
  - 関数の中の重要な部分を網羅しやすい。
### 5-2-1
- 定義型プログラミングという手法がある。これは、ネストやメソッドチェイン、リテラルなどの代わりに、変数や関数、クラスを多用するスタイルのこと。
- 主に以下を達成することを目指す。
  - 高い抽象度を与える。
  - 斜め読みで概要を把握できるようにする。
  - 読み返しを減らす。
#### ネストの改善を考慮する
- ネストによって引き起こされる問題
  - どこが重要なコードか分かりづらい
  - 戻り値の内容を把握しづらい。
- 
