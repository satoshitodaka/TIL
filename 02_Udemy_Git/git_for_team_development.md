# もう怖くないGit！チーム開発で必要なGitを完全マスター

## 2 Gitは何のために使うのか？
ファイルのバージョンを管理するために使う。<br>
ファイルのバージョン管理をしないと、更新状況がわからず混乱する。<br>
元の状態を把握し、誰が、いつ、何を変更したかがわかる。

## 3 Gitの歴史
Linuxカーネル開発で利用するバージョン管理システムがライセンスの都合で使用できなくなったため、自分で開発することにした。<br>
2005年ごろにGitの原型となるプログラムが作成された。<br>
開発を迅速に行うため、以下が重視されている。<br>
スピード、シンプルな設計、ブランチが並列で開発可能、大規模プロジェクトを効率的に扱える。

## 4 GitとGithubとは？
Githubは、Gitのオンラインホスティングサービス。<br>
プリリクエストで複数人で開発ができる。<br>
世界中のチームがGIthub上で開発している。

## 13 Gitの基本的な仕組み
- Gitはスナップショットを記録している。<br>
ある時点のファイルを丸ごと保存し、更新があれば都度丸ごと保存する。<br>
なぜバージョン管理をするか？コミットを辿ることで、以前の状態に戻せる。<br>
コミットは直前のコミットを記憶しており、最古のコミットまで辿ることができる。

## 14 Gitの操作の流れ
- 自分の操作をアップする場合<br>
自分のワークツリーからスナップショットをローカルリポジトリに記録、Githubにアップ。<br>
- 他人の操作をプルする場合<br>
GithubからローカルリポジトリにDL、それをワークツリーに反映させる。<br>

####  ローカルは3つのエリアに分かれている。
- ワークツリーは手元の作業場、ファイルを変更する場所<br>
- ステージはコミットの準備をする場所、仮置き場のような場所<br>
- リポジトリはスナップショットを記録する場所

## 15 Gitはどのようにデータを管理しているのか
####  Gitのデータ構造は？
- Git add<br>
レポジトリに、作成したファイルの圧縮ファイルを作成する。（文字列をハッシュ関数で暗号化したもの）<br>
ステージ上に、圧縮ファイルと作成したファイルを紐付けるインデックスを作成する。<br>
- Git commit<br>
ステージに作成したインデックスを元に、レポジトリにツリー（ファイル構成を記録するもの）を作成する<br>
次に、ツリーに対してコミットという情報を作成する。コミットには、ツリーの情報、作成者、日付とメッセージが記録される。

## 16 Gitのデータ管理は？
####  ファイルを新規追加した場合は？
- コミットを作成する際、親コミットを登録する仕組みとなっており、これにより前のコミットを辿れる。
####  ファイルを変更したら
- Git addの圧縮ファイル作成は、変更があったファイルのみ行われる（未修正ファイルは行われない）<br>
ステージ上のインデックスは、前回のインデックス情報を上書きする形で記録される。<br>
- Git commitでは、変更内容を反映したツリーを作成、スナップショットを保存する。<br>
コミットには作成したツリーと、変更前の親コミット情報が記録されるので、変更の履歴を辿ることができる。

####  まとめ
- Gitはデータ保存時に、リポジトリに「圧縮ファイル」「ツリー」「コミット」ファイルを作成する。
- コミットは親コミットが記録されており、変更履歴を辿ることができる。
- Gitの本質は、データを圧縮しスナップショットで保存すること。
- これらのデータに対してGitコマンドを用いると、様々なデータの操作ができる。

## 17 Gitのはじめ方
- まず最初にgit initを実行する。<br>
→.gitディレクトリが作成される。これにはgitに必要なほとんど全てのファイルが含まれる。

## 18 Github上のプロジェクトから始める
- Gitレポジトリのコピーを作成する。（git clone URL）<br>
このコマンドにより、作業ツリーとgitディレクトリがローカルにコピーされる。

## 19 変更をステージに追加する。
- Git add ファイル名を指定する。（またはgit add . 、Git add ディレクトリ 名）
- ステージは、ワークツリーでの一部の変更だけを記録する場合に有意。

## 21 変更を記録する。（コミット）
- Git commitでコミットできる。このコマンドではエディタが起動するので、詳細を登録できる。
- -mはエディタを起動せずにコメントを残せる。
- -vは変更内容を確認できる。
- コミットメッセージはわかりやすく書く。<br>
簡単に書く場合は１行で、正式に書く場合は、用件に１行、理由に１行を入力する。

## 22 現在の状況を確認する。
- Git status<br>
ワークツリーとステージ、ステージとリポジトリの間で変更があれば表示する。

## 23 何を変更したかを確認する。
- Git diff<br>
コマンドの後にファイル名を付ければ、特定のファイルの変更内容を確認できる。<br>
--stagedをつければ、git addした後の変更分を確認できる。（コミットしていない内容）

## 24 変更履歴を確認する。
- Git log<br>
Git log --oneline 1行で表示する<br>
Git log -p ファイル名 ファイルの変更差分を表示する。　ファイル名は省略可能<br>
Git log -n コミット数 表示するコミット数を表示する。

## 25 ファイルの削除を記録する。
- ファイルごと削除する<br>
Git rm ファイル名<br>
Git rm -r ディレクトリ名<br>
- ファイルを残したいとき<br>
Git rm --cashed ファイル名

## 26 ファイルの移動を記録する。
- Git rm 旧ファイル名 新ファイル名<br>
これは以下と同じ挙動をする。<br>
Mv 旧ファイル 新ファイル<br>
Git rm 旧ファイル<br>
Git add 新ファイル<br>

## 27 Githubにプッシュする
- Git push origin master

## 28 Githubの画面を確認する
- Raw データの生ファイルで、コピペに便利
- Blame 責任者という意味で、ファイルのコミットの履歴を確認できる。

## 29 コマンドにエイリアスをつける。
以下の設定をすることで、コマンドの省略形を登録できる。--globalコマンドによりPC全体に適用される。<br>
- Git config --global alias.ci commit
- Git config --global alias.st status
- Git config --global alias.br branch
- Git config --global alias.co checkout

## 30 バージョン管理したくないファイルを無視する。
- バージョン管理したくないファイルは管理から外す（パスワード管理、自動生成されるファイルなど）
- .gitignoreファイルに指定する。<br>
ファイル名 指定したファイルを除外<br>
/root.html ルートディレクトリを指定<br>
ディレクトリ名/ ディレクトリ以下を除外<br>
/*/*.css /以外の文字列にマッチするファイルを除外

## セクション4
## 31 ファイルへの変更を取り消す
- Git checkout<br>
Git checkout --ファイル名<br>
Git checkout --ディレクトリ名<br>
Git checkout --.　全変更を取り消す<br>
--をつけるのは、ブランチ名とファイル名が被った際にどちらを指定しているか（ファイル名を指定ということ）をgitに示すため

## 32 ステージした変更を取り消す
- Git reset HEAD<br>
上記コマンドの後に以下を指定すると、ステージでの変更を取り消す対象を指定できる。<br>
※ワークツリーの変更は取り消せないので、ワークツリーを戻す場合はgit chekoutコマンドを使うこと。v
Git reset HEAD ファイル名<br>
Git reset HEAD ディレクトリ名<br>
Git reset HEAD .　変更を全て取り消す<br>
HEADは、最新のコミットの情報を指す。

## 33 直前のコミットをやり直す
- Git commit --amend(amendとは、やり直すという意味）<br>
※リモートにpushした後はamendしたらNG

#### セクション5
## 34 リモートリポジトリの情報を確認する。
- Git remote<br>
登録されているリモートリポジトリ名を表示する。-vを使うと、URLが表示される。

## 35 リモートリポジトリを追加する。
- リモートリポジトリは複数登録することができる。

## 36 リモートから取得する。（fetch）
- リモートからの取得には2種類ある。fetchとpull<br>
リモートの内容をローカルリポジトリに持ってくる操作（マージは行わない）

## 37 リモートから取得する（pull）
- Git pull origin master　※origin master は省略可能。<br>
Git fetch origin masterとgit merge origin/masterを同時に実行するコマンド

## 38 フェッチをプルを使い分ける。
- Git pullは、今現在いるローカルのワークツリーにマージするため<br>
ブランチを指定する意図があった場合は注意が必要。（違うブランチに移動する必要あり）<br>
- 基本はフェッチがおすすめ

## 39 リモートの情報を詳しく知る。
- Git remote show リモート名　で、リモートの詳細情報を取得できる。<br>
フェッチとプッシュのURL、リモートブランチ、git pullの挙動、git pushの挙動

## 40 リモートを削除、変更する場合
- 変更　Git remote rename 旧リモート名 新リモート名
- 削除　Git remote rm リモート名

## セクション6
## 41 ブランチとは
- 並行して複数の機能を開発するための機能

## 42 ブランチの仕組み
- gitにおいて、コミットがスナップショットを記録し、それが時系列に連なっている。<br>
ブランチとはこのコミットを指したポインタの事。<br>
HEADという言葉があり、これは今作業しているブランチをさす。（作業中ブランチのポインターに過ぎない）<br>
コミットした場合、ブランチが指すコミットファイルが最新のものに変わる。<br>
